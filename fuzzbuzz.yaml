base: ubuntu:16.04
language: go
version: "1.12"
checkout: github.com/percona/pmm-agent
setup:
  - make install

targets:
  - name: fuzz-slowlog-parser
    setup:
      - mkdir -p agents/mysql/slowlog/parser/corpus
      - cp agents/mysql/slowlog/parser/testdata/*.log agents/mysql/slowlog/parser/corpus/
    corpus: agents/mysql/slowlog/parser/corpus
    harness:
      function: Fuzz
      build_tags: gofuzz
      package: github.com/percona/pmm-agent/agents/mysql/slowlog/parser
